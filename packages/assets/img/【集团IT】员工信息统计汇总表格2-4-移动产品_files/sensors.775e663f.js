(window.webpackJsonplizard_service_vendor=window.webpackJsonplizard_service_vendor||[]).push([[1],{177:function(e,t,r){"use strict";var l=this&&this.__assign||function(){return(l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=r(178),o=r(179),c=r(180),n=r(181).isSelfHosted,p=r(184),i=(Object.defineProperty(a.prototype,"disabled",{get:function(){return s(window,"process.env.PRIVATE_DEPLOY",!1)||n()},enumerable:!0,configurable:!0}),a.prototype.setProfile=function(e){this.disabled||p.shimo.setProfile(e)},a.prototype.registerPage=function(e){p.shimo.registerPage(e)},a.prototype.login=function(e){if(!this.disabled){var t=e||s(window,"cow.currentUser.id");p.shimo.registerPage({shimo_user_id:t}),0<t&&p.shimo.login(t)}},a.prototype.quick=function(e){if(!this.disabled){var t=d();p.shimo.quick(e,{messageId:t})}},a.prototype.autoTrack=function(e){void 0===e&&(e={}),this.disabled||(this.bindVisibilityChange(),this.login(e.userId),this.registerPage(e),this.quick("autoTrack"),this.pvStartTime=new Date)},a.prototype.autoTrackSinglePage=function(){this.disabled||(this.quick("autoTrackSinglePage"),this.pvStartTime=new Date)},a.prototype.trackRepeatedPV=function(){this.disabled||(new Date).getTime()-this.pvStartTime.getTime()>=this.pvIntervals&&(p.shimo.registerPage({repeatedPV:!0}),this.autoTrackSinglePage())},a.prototype.import=function(e){this.disabled||e&&(this.trackMaps=o({},this.trackMaps,e))},a.prototype.track=function(e,t,r,n){if(void 0===r&&(r=!0),!this.disabled&&e){var i=d();if("string"!=typeof e||"object"!=typeof t&&void 0!==t){var o=e,a=String(t),s=function(e){var t;switch(e){case 2:t="newSheetOps";break;case 3:t="oldSheetOps";break;case 4:t="newDocOps";break;case 5:t="oldDocOps";break;default:return e}return t}(o),c=f(o),u=this.trackMaps[a]||a;p.shimo.track(s,l({moduleName:c,opsName:this.trackMaps[u]||u,opsSuccessed:r},n,{messageId:i}))}else p.shimo.track(e,l({},t||{},{messageId:i}))}},a.prototype.loadingStatusTrack=function(e,t,r){if(!this.disabled){var n=s(window,"cow.currentFile.guid");this.track("loadingStatus",{moduleName:f(e),loadTime:t,fileID:n,fileLoadSucessed:r})}},a.prototype.syncStatusTrack=function(e,t,r){if(!this.disabled){var n=s(window,"cow.currentFile.guid");this.track("syncStatus",{fileType:f(e),type:t,status:r,fileID:n})}},a.prototype.exportTrack=function(e,t,r,n){if(!this.disabled){var i=s(window,"cow.currentFile.guid"),o=l({},n,{fileType:f(e),fileFormat:t,fileUrl:i,exportSucessed:r});this.track("export",o)}},a.prototype.importTrack=function(e,t,r,n){if(!this.disabled){var i=s(window,"cow.currentFile.guid");this.track("import",{fileType:f(e),fileFormat:t,fileUrl:i,importSucceed:r,importTime:n})}},a.prototype.copyPasteTrack=function(e,t,r){this.disabled||this.track("copyPaste",{fileType:f(e),pasteTime:t,pasteSuccessed:r})},a.prototype.editErrorTrack=function(e,t,r){if(!this.disabled){var n={fileType:f(e),errorType:t};"object"==typeof r&&(n=o({},n,r)),this.track("editError",n)}},a.prototype.trackOther=function(e,t,r,n){if(!this.disabled){var i={fileType:f(e),errorType:r};"object"==typeof n&&(i=o({},i,n)),this.track(t,i)}},a.prototype.editTrack=function(e){if(!this.disabled){var t=s(window,"cow.currentFile.guid");this.editingGuid!==t&&(this.editingGuid=t,this.track("edit",{fileType:f(e),fileID:t}))}},a.prototype.appTrack=function(e){if(void 0===e&&(e={}),!this.disabled){this.login(e.userId),this.registerPage(e);var t=s(window,"cow.currentFile")||s(window,"cow.tempCurrentFile"),r={fileType:f(t&&t.type)},n=s(window,"cow.readonly");n&&(r.readonly=n),this.track("appView",r)}},a.prototype.bindVisibilityChange=function(){var e,t=this,r="notExits";void 0!==document.hidden?(r="visibilitychange",e="visibilityState"):void 0!==document.mozHidden?(r="mozvisibilitychange",e="mozVisibilityState"):void 0!==document.msHidden?(r="msvisibilitychange",e="msVisibilityState"):void 0!==document.webkitHidden&&(r="webkitvisibilitychange",e="webkitVisibilityState"),document.addEventListener(r,function(){"hidden"!==document[e]&&t.trackRepeatedPV()},!1)},a);function a(e){this.pvIntervals=288e5,this.trackMaps={},this.pvStartTime=new Date,this.editingGuid="";/[&?]trackDebug/.test(window.location.search);var t="default",r="https://shimodev.com/logservice/web/coll.jpg?project=development";if(!function(){if(window.location.host.match(/shimo.im/))return!0;if(window.__SHIMO_CONTEXT__)return!window.__SHIMO_CONTEXT__.__dev;if(window.electronSdk)return"https://shimo.im"===window.electronSdk.getEnv().APP_URL;return!1}()||(r="https://dalog.shimo.im/logservice/web/coll.jpg?project="+(t="production")),function(){if(window.location.host.match(/shimodev.com/))return!0;if(window.__SHIMO_CONTEXT__)return window.__SHIMO_CONTEXT__.__dev;if(window.electronSdk)return"https://shimodev.com"===window.electronSdk.getEnv().APP_URL;return!1}()&&(r="https://shimodev.com/logservice/web/coll.jpg?project="+t),this.pvIntervals=288e5,this.trackMaps={},p.shimo.init(l({show_log:!1,shimo_url:r},e)),!this.disabled){p.shimo.clearAllRegister({});var n=c.get("deviceId");p.shimo.registerPage({userAgent:window.navigator.userAgent,shimo_device_id:n});var i=s(window,"cow.currentUser.teamId")||0,o=!!(s(window,"cow.currentUser.id")<0);p.shimo.setProfile({enterpriseId:i,anonymous:o});var a=s(window,"cow.readonly");a&&p.shimo.registerPage({readonly:a})}}function f(e){var t;switch(e){case 2:case"sheet":t="新表格";break;case 3:case"spreadsheet":t="老表格";break;case 4:case"newdoc":t="新文档";break;case 5:case"document":t="老文档";break;case"mosheet":t="墨表格";break;default:return e}return t}function d(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}t.ShimoSensor=i},178:function(z,e,t){(function(e){var t="Expected a function",n="__lodash_hash_undefined__",r=1/0,i="[object Function]",o="[object GeneratorFunction]",a="[object Symbol]",s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/,u=/^\./,l=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,p=/\\(\\)?/g,f=/^\[object .+?Constructor\]$/,d="object"==typeof e&&e&&e.Object===Object&&e,h="object"==typeof self&&self&&self.Object===Object&&self,g=d||h||Function("return this")();var m,_=Array.prototype,v=Function.prototype,y=Object.prototype,b=g["__core-js_shared__"],w=(m=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"",S=v.toString,k=y.hasOwnProperty,j=y.toString,O=RegExp("^"+S.call(k).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),P=g.Symbol,$=_.splice,N=M(g,"Map"),x=M(Object,"create"),C=P?P.prototype:void 0,E=C?C.toString:void 0;function D(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function I(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function A(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function T(e,t){for(var r,n,i=e.length;i--;)if((r=e[i][0])===(n=t)||r!=r&&n!=n)return i;return-1}function R(e,t){for(var r=0,n=(t=function(e,t){if(H(e))return!1;var r=typeof e;if("number"==r||"symbol"==r||"boolean"==r||null==e||V(e))return!0;return c.test(e)||!s.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:function(e){return H(e)?e:L(e)}(t)).length;null!=e&&r<n;)e=e[F(t[r++])];return r&&r==n?e:void 0}function U(e){return!(!B(e)||function(e){return!!w&&w in e}(e))&&(function(e){var t=B(e)?j.call(e):"";return t==i||t==o}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?O:f).test(function(e){if(null!=e){try{return S.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function q(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function M(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return U(r)?r:void 0}D.prototype.clear=function(){this.__data__=x?x(null):{}},D.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},D.prototype.get=function(e){var t=this.__data__;if(x){var r=t[e];return r===n?void 0:r}return k.call(t,e)?t[e]:void 0},D.prototype.has=function(e){var t=this.__data__;return x?void 0!==t[e]:k.call(t,e)},D.prototype.set=function(e,t){return this.__data__[e]=x&&void 0===t?n:t,this},I.prototype.clear=function(){this.__data__=[]},I.prototype.delete=function(e){var t=this.__data__,r=T(t,e);return!(r<0)&&(r==t.length-1?t.pop():$.call(t,r,1),!0)},I.prototype.get=function(e){var t=this.__data__,r=T(t,e);return r<0?void 0:t[r][1]},I.prototype.has=function(e){return-1<T(this.__data__,e)},I.prototype.set=function(e,t){var r=this.__data__,n=T(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},A.prototype.clear=function(){this.__data__={hash:new D,map:new(N||I),string:new D}},A.prototype.delete=function(e){return q(this,e).delete(e)},A.prototype.get=function(e){return q(this,e).get(e)},A.prototype.has=function(e){return q(this,e).has(e)},A.prototype.set=function(e,t){return q(this,e).set(e,t),this};var L=J(function(e){e=function(e){return null==e?"":function(e){if("string"==typeof e)return e;if(V(e))return E?E.call(e):"";var t=e+"";return"0"==t&&1/e==-r?"-0":t}(e)}(e);var i=[];return u.test(e)&&i.push(""),e.replace(l,function(e,t,r,n){i.push(r?n.replace(p,"$1"):t||e)}),i});function F(e){if("string"==typeof e||V(e))return e;var t=e+"";return"0"==t&&1/e==-r?"-0":t}function J(i,o){if("function"!=typeof i||o&&"function"!=typeof o)throw new TypeError(t);var a=function(){var e=arguments,t=o?o.apply(this,e):e[0],r=a.cache;if(r.has(t))return r.get(t);var n=i.apply(this,e);return a.cache=r.set(t,n),n};return a.cache=new(J.Cache||A),a}J.Cache=A;var H=Array.isArray;function B(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function V(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&j.call(e)==a}z.exports=function(e,t,r){var n=null==e?void 0:R(e,t);return void 0===n?r:n}}).call(this,t(12))},179:function(e,t){var r=9007199254740991,a="[object Arguments]",n="[object Function]",i="[object GeneratorFunction]",o=/^(?:0|[1-9]\d*)$/;var s,c,u=Object.prototype,l=u.hasOwnProperty,p=u.toString,f=u.propertyIsEnumerable,d=(s=Object.keys,c=Object,function(e){return s(c(e))}),h=Math.max,g=!f.call({valueOf:1},"valueOf");function m(e,t){var r=S(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&k(e)}(e)&&l.call(e,"callee")&&(!f.call(e,"callee")||p.call(e)==a)}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,i=!!n;for(var o in e)!t&&!l.call(e,o)||i&&("length"==o||y(o,n))||r.push(o);return r}function _(e,t,r){var n=e[t];l.call(e,t)&&w(n,r)&&(void 0!==r||t in e)||(e[t]=r)}function v(o,a){return a=h(void 0===a?o.length-1:a,0),function(){for(var e=arguments,t=-1,r=h(e.length-a,0),n=Array(r);++t<r;)n[t]=e[a+t];t=-1;for(var i=Array(a+1);++t<a;)i[t]=e[t];return i[a]=n,function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(o,this,i)}}function y(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||o.test(e))&&-1<e&&e%1==0&&e<t}function b(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||u)}function w(e,t){return e===t||e!=e&&t!=t}var S=Array.isArray;function k(e){return null!=e&&function(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=r}(e.length)&&!function(e){var t=j(e)?p.call(e):"";return t==n||t==i}(e)}function j(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var O,P=(O=function(e,t){if(g||b(t)||k(t))!function(e,t,r,n){r=r||{};for(var i=-1,o=t.length;++i<o;){var a=t[i],s=n?n(r[a],e[a],a,r,e):void 0;_(r,a,void 0===s?e[a]:s)}}(t,function(e){return k(e)?m(e):function(e){if(!b(e))return d(e);var t=[];for(var r in Object(e))l.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}(t),e);else for(var r in t)l.call(t,r)&&_(e,r,t[r])},v(function(e,t){var r=-1,n=t.length,i=1<n?t[n-1]:void 0,o=2<n?t[2]:void 0;for(i=3<O.length&&"function"==typeof i?(n--,i):void 0,o&&function(e,t,r){if(!j(r))return!1;var n=typeof t;return!!("number"==n?k(r)&&y(t,r.length):"string"==n&&t in r)&&w(r[t],e)}(t[0],t[1],o)&&(i=n<3?void 0:i,n=1),e=Object(e);++r<n;){var a=t[r];a&&O(e,a,r,i)}return e}));e.exports=P},180:function(n,i,o){var a,s;!function(e){if(void 0===(s="function"==typeof(a=e)?a.call(i,o,i,n):a)||(n.exports=s),!0,n.exports=e(),!!0){var t=window.Cookies,r=window.Cookies=e();r.noConflict=function(){return window.Cookies=t,r}}}(function(){function g(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}return function e(d){function h(e,t,r){var n;if("undefined"!=typeof document){if(1<arguments.length){if("number"==typeof(r=g({path:"/"},h.defaults,r)).expires){var i=new Date;i.setMilliseconds(i.getMilliseconds()+864e5*r.expires),r.expires=i}r.expires=r.expires?r.expires.toUTCString():"";try{n=JSON.stringify(t),/^[\{\[]/.test(n)&&(t=n)}catch(e){}t=d.write?d.write(t,e):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=(e=(e=encodeURIComponent(String(e))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var o="";for(var a in r)r[a]&&(o+="; "+a,!0!==r[a]&&(o+="="+r[a]));return document.cookie=e+"="+t+o}e||(n={});for(var s=document.cookie?document.cookie.split("; "):[],c=/(%[0-9A-Z]{2})+/g,u=0;u<s.length;u++){var l=s[u].split("="),p=l.slice(1).join("=");this.json||'"'!==p.charAt(0)||(p=p.slice(1,-1));try{var f=l[0].replace(c,decodeURIComponent);if(p=d.read?d.read(p,f):d(p,f)||p.replace(c,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(e){}if(e===f){n=p;break}e||(n[f]=p)}catch(e){}}return n}}return(h.set=h).get=function(e){return h.call(h,e)},h.getJSON=function(){return h.apply({json:!0},[].slice.call(arguments))},h.defaults={},h.remove=function(e,t){h(e,"",g(t,{expires:-1}))},h.withConverter=e,h}(function(){})})},181:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(182);t.getBoolean=n.getBoolean,t.getString=n.getString,t.hasKey=n.hasKey,t.isSelfHosted=function(){return n.getBoolean("SELF_HOSTED")}},182:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(183);t.getBoolean=function(e){var t=n.runtimeENV(e);return!(!t||"0"===t)},t.getString=function(e){if("UPLOADER_TYPE"===e)return"aws"===n.runtimeENV(e)?"aws":"qiniu";var t=n.runtimeENV(e);return"string"==typeof t?t:null},t.hasKey=function(e){return void 0!==n.runtimeENV(e)}},183:function(e,t,r){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0}),t.runtimeENV=function(e){var t="undefined"==typeof window?void 0===n?{}:n:window,r=t&&t.__RUNTIME_ENV__||{};return void 0===r[e]?r[function(e){return e.replace("SELF_HOSTED","PRIVATE_DEPLOY")}(e)]:r[e]}}).call(this,r(12))},184:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shimo=r(185)},185:function(e,t,r){"use strict";var n,i=r(186),l=window.shimoDataAnalytic201505;n=l?(l=window[l],!0):!(l={}),l._t=l._t||1*new Date,l.has_load_sdk=!0;var p=l._={};l.para_default={name:"sa",max_referrer_string_length:200,max_string_length:500,cross_subdomain:!0,show_log:!0,is_debug:!1,debug_mode:!1,debug_mode_upload:!1,session_time:0,use_client_time:!1,source_channel:[],send_type:"image",vtrack_ignore:{},auto_init:!0,is_single_page:!1,source_type:{},callback_timeout:200,is_track_device_id:!1,use_app_track:!1},l.initPara=function(e){var t;for(t in l.para=e||l.para||{},l.para.server_url=l.para.shimo_url||l.para.server_url,l.para_default)void 0===l.para[t]&&(l.para[t]=l.para_default[t]);"string"==typeof l.para.server_url&&"://"===l.para.server_url.slice(0,3)&&(l.para.server_url=location.protocol+l.para.server_url),"string"==typeof l.para.web_url&&"://"===l.para.web_url.slice(0,3)&&(l.para.web_url=location.protocol+l.para.web_url),"image"!==l.para.send_type&&"ajax"!==l.para.send_type&&"beacon"!==l.para.send_type&&(l.para.send_type="image"),!l.para.heatmap_url&&l.para.sdk_url&&(l.para.heatmap_url=l.para.sdk_url.replace(/[^\/]+\.js[^\/]*$/,"heatmap.min.js"));var r=["www.baidu.","m.baidu.","m.sm.cn","so.com","sogou.com","youdao.com","google.","yahoo.com/","bing.com/","ask.com/"],n=["weibo.com","renren.com","kaixin001.com","douban.com","qzone.qq.com","zhihu.com","tieba.baidu.com","weixin.qq.com"],i={baidu:["wd","word","kw","keyword"],google:"q",bing:"q",yahoo:"p",sogou:"query",so:"q",sm:"q"};if("object"==typeof l.para.source_type&&(l.para.source_type.search=p.isArray(l.para.source_type.search)?l.para.source_type.search.concat(r):r,l.para.source_type.social=p.isArray(l.para.source_type.social)?l.para.source_type.social.concat(n):n,l.para.source_type.keyword=p.isObject(l.para.source_type.keyword)?p.extend(i,l.para.source_type.keyword):i),p.isObject(l.para.heatmap)&&(l.para.heatmap.clickmap=l.para.heatmap.clickmap||"default",l.para.heatmap.scroll_notice_map=l.para.heatmap.scroll_notice_map||"default",l.para.heatmap.scroll_delay_time=l.para.heatmap.scroll_delay_time||4e3),"object"==typeof l.para.server_url&&l.para.server_url.length)for(t=0;t<l.para.server_url.length;t++)/sa\.gif[^\/]*$/.test(l.para.server_url[t])||(l.para.server_url[t]=l.para.server_url[t].replace(/\/sa$/,"/sa.gif").replace(/(\/sa)(\?[^\/]+)$/,"/sa.gif$2"));else/sa\.gif[^\/]*$/.test(l.para.server_url)||(l.para.server_url=l.para.server_url.replace(/\/sa$/,"/sa.gif").replace(/(\/sa)(\?[^\/]+)$/,"/sa.gif$2"));"string"==typeof l.para.server_url&&(l.para.debug_mode_url=l.para.debug_mode_url||l.para.server_url.replace("sa.gif","debug")),!0===l.para.noCache?l.para.noCache="?"+(new Date).getTime():l.para.noCache=""};var c=Array.prototype,u=Function.prototype,a=Object.prototype,f=c.slice,d=a.toString,h=a.hasOwnProperty,s=i.version;l.lib_version=s;var g=[],_=!1,v=0,y=0,b=0,w=0,S="utm_source utm_medium utm_campaign utm_content utm_term",k="object"==typeof k?k:{};function j(){for(var e=1*new Date,t=0;e==1*new Date;)t++;return e.toString(16)+t.toString(16)}function O(){return new RegExp(/(.*?)\.?([^\.]*?)\.(com|net|org|biz|ws|in|me|co\.uk|co|org\.uk|ltd\.uk|plc\.uk|me\.uk|edu|mil|br\.com|cn\.com|eu\.com|hu\.com|no\.com|qc\.com|sa\.com|se\.com|se\.net|us\.com|uy\.com|ac|co\.ac|gv\.ac|or\.ac|ac\.ac|af|am|as|at|ac\.at|co\.at|gv\.at|or\.at|asn\.au|com\.au|edu\.au|org\.au|net\.au|id\.au|be|ac\.be|adm\.br|adv\.br|am\.br|arq\.br|art\.br|bio\.br|cng\.br|cnt\.br|com\.br|ecn\.br|eng\.br|esp\.br|etc\.br|eti\.br|fm\.br|fot\.br|fst\.br|g12\.br|gov\.br|ind\.br|inf\.br|jor\.br|lel\.br|med\.br|mil\.br|net\.br|nom\.br|ntr\.br|odo\.br|org\.br|ppg\.br|pro\.br|psc\.br|psi\.br|rec\.br|slg\.br|tmp\.br|tur\.br|tv\.br|vet\.br|zlg\.br|br|ab\.ca|bc\.ca|mb\.ca|nb\.ca|nf\.ca|ns\.ca|nt\.ca|on\.ca|pe\.ca|qc\.ca|sk\.ca|yk\.ca|ca|cc|ac\.cn|net\.cn|com\.cn|edu\.cn|gov\.cn|org\.cn|bj\.cn|sh\.cn|tj\.cn|cq\.cn|he\.cn|nm\.cn|ln\.cn|jl\.cn|hl\.cn|js\.cn|zj\.cn|ah\.cn|gd\.cn|gx\.cn|hi\.cn|sc\.cn|gz\.cn|yn\.cn|xz\.cn|sn\.cn|gs\.cn|qh\.cn|nx\.cn|xj\.cn|tw\.cn|hk\.cn|mo\.cn|cn|cx|cz|de|dk|fo|com\.ec|tm\.fr|com\.fr|asso\.fr|presse\.fr|fr|gf|gs|co\.il|net\.il|ac\.il|k12\.il|gov\.il|muni\.il|ac\.in|co\.in|org\.in|ernet\.in|gov\.in|net\.in|res\.in|is|it|ac\.jp|co\.jp|go\.jp|or\.jp|ne\.jp|ac\.kr|co\.kr|go\.kr|ne\.kr|nm\.kr|or\.kr|li|lt|lu|asso\.mc|tm\.mc|com\.mm|org\.mm|net\.mm|edu\.mm|gov\.mm|ms|nl|no|nu|pl|ro|org\.ro|store\.ro|tm\.ro|firm\.ro|www\.ro|arts\.ro|rec\.ro|info\.ro|nom\.ro|nt\.ro|se|si|com\.sg|org\.sg|net\.sg|gov\.sg|sk|st|tf|ac\.th|co\.th|go\.th|mi\.th|net\.th|or\.th|tm|to|com\.tr|edu\.tr|gov\.tr|k12\.tr|net\.tr|org\.tr|com\.tw|org\.tw|net\.tw|ac\.uk|uk\.com|uk\.net|gb\.com|gb\.net|vg|sh|kz|ch|info|ua|gov|name|pro|ie|hk|com\.hk|org\.hk|net\.hk|edu\.hk|us|tk|cd|by|ad|lv|eu\.lv|bz|es|jp|cl|ag|mobi|eu|co\.nz|org\.nz|net\.nz|maori\.nz|iwi\.nz|io|la|md|sc|sg|vc|tw|travel|my|se|tv|pt|com\.pt|edu\.pt|asia|fi|com\.ve|net\.ve|fi|org\.ve|web\.ve|info\.ve|co\.ve|tel|im|gr|ru|net\.ru|org\.ru|hr|com\.hr|ly|xyz)$/)}function P(e,t){var r=e.charAt(0),n=t.split(r);return r===e?n:n[(e=parseInt(e.substring(1),10))<0?n.length+e:e-1]}function $(e,t){for(var r,n=e.charAt(0),i=t.split("&"),o=[],a={},s=[],c=e.substring(1),u=0,l=i.length;u<l;u++)if(""!==(o=(o=i[u].match(/(.*?)=(.*)/))||[i[u],i[u],""])[1].replace(/\s/g,"")){if(o[2]=(r=o[2]||"",p.decodeURIComponent(r.replace(/\+/g," "))),c===o[1])return o[2];(s=o[1].match(/(.*)\[([0-9]+)\]/))?(a[s[1]]=a[s[1]]||[],a[s[1]][s[2]]=o[2]):a[o[1]]=o[2]}return n===e?a:a[c]}k.info=function(){if((p.sessionStorage.isSupport()&&"true"===sessionStorage.getItem("sensorsdata_jssdk_debug")||l.para.show_log)&&(!0!==l.para.show_log&&"string"!==l.para.show_log&&!1!==l.para.show_log||(arguments[0]=p.formatJsonString(arguments[0])),"object"==typeof console&&console.log))try{return}catch(e){}},function(){u.bind;var a=c.forEach,n=c.indexOf,e=Array.isArray,s={},i=p.each=function(e,t,r){if(null==e)return!1;if(a&&e.forEach===a)e.forEach(t,r);else if(e.length===+e.length){for(var n=0,i=e.length;n<i;n++)if(n in e&&t.call(r,e[n],n,e)===s)return!1}else for(var o in e)if(h.call(e,o)&&t.call(r,e[o],o,e)===s)return!1};p.logger=k,p.extend=function(r){return i(f.call(arguments,1),function(e){for(var t in e)void 0!==e[t]&&(r[t]=e[t])}),r},p.extend2Lev=function(r){return i(f.call(arguments,1),function(e){for(var t in e)void 0!==e[t]&&(p.isObject(e[t])&&p.isObject(r[t])?p.extend(r[t],e[t]):r[t]=e[t])}),r},p.coverExtend=function(r){return i(f.call(arguments,1),function(e){for(var t in e)void 0!==e[t]&&void 0===r[t]&&(r[t]=e[t])}),r},p.isArray=e||function(e){return"[object Array]"===d.call(e)},p.isFunction=function(e){if(!e)return!1;try{return/^\s*\bfunction\b/.test(e)}catch(e){return!1}},p.isArguments=function(e){return!(!e||!h.call(e,"callee"))},p.toArray=function(e){return e?e.toArray?e.toArray():p.isArray(e)?f.call(e):p.isArguments(e)?f.call(e):p.values(e):[]},p.values=function(e){var t=[];return null==e||i(e,function(e){t[t.length]=e}),t},p.include=function(e,t){var r=!1;return null==e?r:n&&e.indexOf===n?-1!=e.indexOf(t):(i(e,function(e){if(r=r||e===t)return s}),r)}}(),p.inherit=function(e,t){return e.prototype=new t,(e.prototype.constructor=e).superclass=t.prototype,e},p.trim=function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},p.isObject=function(e){return"[object Object]"==d.call(e)&&null!=e},p.isEmptyObject=function(e){if(p.isObject(e)){for(var t in e)if(h.call(e,t))return!1;return!0}return!1},p.isUndefined=function(e){return void 0===e},p.isString=function(e){return"[object String]"==d.call(e)},p.isDate=function(e){return"[object Date]"==d.call(e)},p.isBoolean=function(e){return"[object Boolean]"==d.call(e)},p.isNumber=function(e){return"[object Number]"==d.call(e)&&/[\d\.]+/.test(String(e))},p.isElement=function(e){return!(!e||1!==e.nodeType)},p.isJSONString=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},p.decodeURIComponent=function(t){var r=t;try{r=decodeURIComponent(t)}catch(e){r=t}return r},p.encodeDates=function(r){return p.each(r,function(e,t){p.isDate(e)?r[t]=p.formatDate(e):p.isObject(e)&&(r[t]=p.encodeDates(e))}),r},p.hashCode=function(e){if("string"!=typeof e)return 0;var t=0;if(0==e.length)return t;for(var r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t},p.formatDate=function(e){function t(e){return e<10?"0"+e:e}return e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+" "+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+"."+t(e.getMilliseconds())},p.searchObjDate=function(r){p.isObject(r)&&p.each(r,function(e,t){p.isObject(e)?p.searchObjDate(r[t]):p.isDate(e)&&(r[t]=p.formatDate(e))})},p.searchZZAppStyle=function(e){void 0!==e.properties.$project&&(e.project=e.properties.$project,delete e.properties.$project),void 0!==e.properties.$token&&(e.token=e.properties.$token,delete e.properties.$token)},p.formatJsonString=function(t){try{return JSON.stringify(t,null,"  ")}catch(e){return JSON.stringify(t)}},p.formatString=function(e){return e.length>l.para.max_string_length?(k.info("字符串长度超过限制，已经做截取--"+e),e.slice(0,l.para.max_string_length)):e},p.searchObjString=function(r){p.isObject(r)&&p.each(r,function(e,t){p.isObject(e)?p.searchObjString(r[t]):p.isString(e)&&(r[t]=p.formatString(e))})},p.searchConfigData=function(e){if("object"==typeof e&&e.$option){var t=e.$option;return delete e.$option,t}return{}},p.unique=function(e){for(var t,r=[],n={},i=0;i<e.length;i++)(t=e[i])in n||(n[t]=!0,r.push(t));return r},p.strip_sa_properties=function(e){return p.isObject(e)&&p.each(e,function(t,r){if(p.isArray(t)){var n=[];p.each(t,function(e){p.isString(e)?n.push(e):k.info("您的数据-",r,t,"的数组里的值必须是字符串,已经将其删除")}),0!==n.length?e[r]=n:(delete e[r],k.info("已经删除空的数组"))}p.isString(t)||p.isNumber(t)||p.isDate(t)||p.isBoolean(t)||p.isArray(t)||"$option"===r||(k.info("您的数据-",r,t,"-格式不满足要求，我们已经将其删除"),delete e[r])}),e},p.strip_empty_properties=function(e){var r={};return p.each(e,function(e,t){null!=e&&(r[t]=e)}),r},p.utf8Encode=function(e){var t,r,n,i,o="";for(t=r=0,n=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,i=0;i<n;i++){var a=e.charCodeAt(i),s=null;a<128?r++:s=127<a&&a<2048?String.fromCharCode(a>>6|192,63&a|128):String.fromCharCode(a>>12|224,a>>6&63|128,63&a|128),null!==s&&(t<r&&(o+=e.substring(t,r)),o+=s,t=r=i+1)}return t<r&&(o+=e.substring(t,e.length)),o},p.base64Encode=function(e){var t,r,n,i,o,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s=0,c=0,u="",l=[];if(!e)return e;for(e=p.utf8Encode(e);t=(o=e.charCodeAt(s++)<<16|e.charCodeAt(s++)<<8|e.charCodeAt(s++))>>18&63,r=o>>12&63,n=o>>6&63,i=63&o,l[c++]=a.charAt(t)+a.charAt(r)+a.charAt(n)+a.charAt(i),s<e.length;);switch(u=l.join(""),e.length%3){case 1:u=u.slice(0,-2)+"==";break;case 2:u=u.slice(0,-1)+"="}return u},p.UUID=function(){var e=String(screen.height*screen.width);e=e&&/\d{5,}/.test(e)?e.toString(16):String(31242*Math.random()).replace(".","").slice(0,8);var t=j()+"-"+Math.random().toString(16).replace(".","")+"-"+function(e){var t,r,n=navigator.userAgent,i=[],o=0;function a(e,t){var r,n=0;for(r=0;r<t.length;r++)n|=i[r]<<8*r;return e^n}for(t=0;t<n.length;t++)r=n.charCodeAt(t),i.unshift(255&r),4<=i.length&&(o=a(o,i),i=[]);return 0<i.length&&(o=a(o,i)),o.toString(16)}()+"-"+e+"-"+j();return t?(y=1,t):(y=2,(String(Math.random())+String(Math.random())+String(Math.random())).slice(2,15))},p.getQueryParam=function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),e=p.decodeURIComponent(e);var r=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===r||r&&"string"!=typeof r[1]&&r[1].length?"":p.decodeURIComponent(r[1]).replace(/\+/g," ")},p.urlParse=function(e){function t(e){this._fields={Username:4,Password:5,Port:7,Protocol:2,Host:6,Path:8,URL:0,QueryString:9,Fragment:10},this._values={},this._regex=null,this._regex=/^((\w+):\/\/)?((\w+):?(\w+)?@)?([^\/\?:]+):?(\d+)?(\/?[^\?#]+)?\??([^#]+)?#?(\w*)/,void 0!==e&&this._parse(e)}return t.prototype.setUrl=function(e){this._parse(e)},t.prototype._initValues=function(){for(var e in this._fields)this._values[e]=""},t.prototype.addQueryString=function(e){if("object"!=typeof e)return!1;var t=this._values.QueryString||"";for(var r in e)t=new RegExp(r+"[^&]+").test(t)?t.replace(new RegExp(r+"[^&]+"),r+"="+e[r]):"&"===t.slice(-1)?t+r+"="+e[r]:""===t?r+"="+e[r]:t+"&"+r+"="+e[r];this._values.QueryString=t},t.prototype.getUrl=function(){var e="";return e+=this._values.Origin,e+=this._values.Port?":"+this._values.Port:"",e+=this._values.Path,e+=this._values.QueryString?"?"+this._values.QueryString:"",e+=this._values.Fragment?"#"+this._values.Fragment:""},t.prototype.getUrl=function(){var e="";return e+=this._values.Origin,e+=this._values.Port?":"+this._values.Port:"",e+=this._values.Path,e+=this._values.QueryString?"?"+this._values.QueryString:""},t.prototype._parse=function(e){this._initValues();var t=this._regex.exec(e);if(!t)throw"DPURLParser::_parse -> Invalid URL";for(var r in this._fields)void 0!==t[this._fields[r]]&&(this._values[r]=t[this._fields[r]]);this._values.Hostname=this._values.Host.replace(/:\d+$/,""),this._values.Origin=this._values.Protocol+"://"+this._values.Hostname},new t(e)},p.addEvent=function(){function s(e){return e&&(e.preventDefault=s.preventDefault,e.stopPropagation=s.stopPropagation,e._getPath=s._getPath),e}s._getPath=function(){var r=this;return this.path||this.composedPath&&this.composedPath()||function(){try{var e=r.target,t=[e];if(null===e||null===e.parentElement)return[];for(;null!==e.parentElement;)e=e.parentElement,t.unshift(e);return t}catch(e){return[]}}()},s.preventDefault=function(){this.returnValue=!1},s.stopPropagation=function(){this.cancelBubble=!0};(function(e,t,r){if(e&&e.addEventListener)e.addEventListener(t,function(e){e._getPath=s._getPath,r.call(this,e)},!1);else{var n="on"+t,i=e[n];e[n]=function(i,o,a){return function(e){if(e=e||s(window.event)){e.target=e.srcElement;var t,r,n=!0;return"function"==typeof a&&(t=a(e)),r=o.call(i,e),!1!==t&&!1!==r||(n=!1),n}}}(e,r,i)}}).apply(null,arguments)},p.addHashEvent=function(e){var t="pushState"in window.history?"popstate":"hashchange";p.addEvent(window,t,e)},p.cookie={get:function(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){for(var i=r[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return p.decodeURIComponent(i.substring(t.length,i.length))}return null},set:function(e,t,r,n,i){var o="",a="",s="";if(r=null==r?73e3:r,n=void 0===n?l.para.cross_subdomain:n){var c=p.url("domain",location.href);o=c?"; domain=."+c:""}if(0!==r){var u=new Date;"s"===String(r).slice(-1)?u.setTime(u.getTime()+1e3*Number(String(r).slice(0,-1))):u.setTime(u.getTime()+24*r*60*60*1e3),a="; expires="+u.toGMTString()}i&&(s="; secure"),document.cookie=e+"="+encodeURIComponent(t)+a+"; path=/"+o+s},remove:function(e,t){t=void 0===t?l.para.cross_subdomain:t,p.cookie.set(e,"",-1,t)},getCookieName:function(e){var t="";return t=!1===l.para.cross_subdomain?"string"==typeof(t=p.url("sub",location.href))&&""!==t?"sajssdk_2015_"+e+"_"+t:"sajssdk_2015_root_"+e:"sajssdk_2015_cross_"+e},getNewUser:function(){return null!==this.get("sensorsdata_is_new_user")||null!==this.get(this.getCookieName("new_user"))}},p.getEleInfo=function(e){if(!e.target)return!1;var t=e.target,r=t.tagName.toLowerCase(),n={};n.$element_type=r,n.$element_name=t.getAttribute("name"),n.$element_id=t.getAttribute("id"),n.$element_class_name="string"==typeof t.className?t.className:null,n.$element_target_url=t.getAttribute("href");var i="";return t.textContent?i=p.trim(t.textContent):t.innerText&&(i=p.trim(t.innerText)),i=i&&i.replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255),n.$element_content=i||"","input"===r&&("button"===t.type||"submit"===t.type?n.$element_content=t.value||"":l.para.heatmap&&"function"==typeof l.para.heatmap.collect_input&&l.para.heatmap.collect_input(t)&&(n.$element_content=t.value||"")),(n=p.strip_empty_properties(n)).$url=location.href,n.$url_path=location.pathname,n.$title=document.title,n},p.localStorage={get:function(e){return window.localStorage.getItem(e)},parse:function(e){var t;try{t=JSON.parse(p.localStorage.get(e))||null}catch(e){}return t},set:function(e,t){window.localStorage.setItem(e,t)},remove:function(e){window.localStorage.removeItem(e)},isSupport:function(){var t=!0;try{var e="__sensorsdatasupport__",r="testIsSupportStorage";p.localStorage.set(e,r),p.localStorage.get(e)!==r&&(t=!1),p.localStorage.remove(e)}catch(e){t=!1}return t}},p.sessionStorage={isSupport:function(){var t=!0,e="__sensorsdatasupport__",r="testIsSupportStorage";try{t=!(!sessionStorage||!sessionStorage.setItem)&&(sessionStorage.setItem(e,r),sessionStorage.removeItem(e,r),!0)}catch(e){t=!1}return t}},p.xhr=function(e){if(e){var t=new XMLHttpRequest;return"withCredentials"in t?t:"undefined"!=typeof XDomainRequest?new XDomainRequest:t}if(XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}},p.ajax=function(e){function t(e){if(!e)return"";try{return JSON.parse(e)}catch(e){return{}}}e.credentials=void 0===e.credentials||e.credentials;var r=p.xhr(e.cors);e.type||(e.type=e.data?"POST":"GET"),e=p.extend({success:function(){},error:function(){}},e),r.onreadystatechange=function(){4==r.readyState&&(200<=r.status&&r.status<300||304==r.status?e.success(t(r.responseText)):e.error(t(r.responseText),r.status),r.onreadystatechange=null,r.onload=null)},r.open(e.type,e.url,!0);try{if(e.credentials&&(r.withCredentials=!0),p.isObject(e.header))for(var n in e.header)r.setRequestHeader(n,e.header[n]);e.data&&(e.cors||r.setRequestHeader("X-Requested-With","XMLHttpRequest"),"application/json"===e.contentType?r.setRequestHeader("Content-type","application/json; charset=UTF-8"):r.setRequestHeader("Content-type","application/x-www-form-urlencoded"))}catch(e){}r.send(e.data||null)},p.loadScript=function(e){e=p.extend({success:function(){},error:function(){},appendCall:function(e){document.getElementsByTagName("head")[0].appendChild(e)}},e);var t=null;"css"===e.type&&((t=document.createElement("link")).rel="stylesheet",t.href=e.url),"js"===e.type&&((t=document.createElement("script")).async="async",t.setAttribute("charset","UTF-8"),t.src=e.url,t.type="text/javascript"),t.onload=t.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(e.success(),t.onload=t.onreadystatechange=null)},t.onerror=function(){e.error(),t.onerror=null},e.appendCall(t)},p.url=function(e,t){var r,n={};if("tld?"===e)return O();if(t=t||window.location.toString(),!e)return t;if(e=e.toString(),r=t.match(/^mailto:([^\/].+)/))n.protocol="mailto",n.email=r[1];else{if((r=t.match(/(.*?)\/#\!(.*)/))&&(t=r[1]+r[2]),(r=t.match(/(.*?)#(.*)/))&&(n.hash=r[2],t=r[1]),n.hash&&e.match(/^#/))return $(e,n.hash);if((r=t.match(/(.*?)\?(.*)/))&&(n.query=r[2],t=r[1]),n.query&&e.match(/^\?/))return $(e,n.query);if((r=t.match(/(.*?)\:?\/\/(.*)/))&&(n.protocol=r[1].toLowerCase(),t=r[2]),(r=t.match(/(.*?)(\/.*)/))&&(n.path=r[2],t=r[1]),n.path=(n.path||"").replace(/^([^\/])/,"/$1").replace(/\/$/,""),e.match(/^[\-0-9]+$/)&&(e=e.replace(/^([^\/])/,"/$1")),e.match(/^\//))return P(e,n.path.substring(1));if((r=(r=P("/-1",n.path.substring(1)))&&r.match(/(.*?)\.(.*)/))&&(n.file=r[0],n.filename=r[1],n.fileext=r[2]),(r=t.match(/(.*)\:([0-9]+)$/))&&(n.port=r[2],t=r[1]),(r=t.match(/(.*?)@(.*)/))&&(n.auth=r[1],t=r[2]),n.auth&&(r=n.auth.match(/(.*)\:(.*)/),n.user=r?r[1]:n.auth,n.pass=r?r[2]:void 0),n.hostname=t.toLowerCase(),"."===e.charAt(0))return P(e,n.hostname);O()&&(r=n.hostname.match(O()))&&(n.tld=r[3],n.domain=r[2]?r[2]+"."+r[3]:void 0,n.sub=r[1]||void 0),n.port=n.port||("https"===n.protocol?"443":"80"),n.protocol=n.protocol||("443"===n.port?"https":"http")}return e in n?n[e]:"{}"===e?n:""},p.ry=function(e){return new p.ry.init(e)},p.ry.init=function(e){this.ele=e},p.ry.init.prototype={addClass:function(e){return-1===(" "+this.ele.className+" ").indexOf(" "+e+" ")&&(this.ele.className=this.ele.className+(""===this.ele.className?"":" ")+e),this},removeClass:function(e){var t=" "+this.ele.className+" ";return-1!==t.indexOf(" "+e+" ")&&(this.ele.className=t.replace(" "+e+" "," ").slice(1,-1)),this},hasClass:function(e){return-1!==(" "+this.ele.className+" ").indexOf(" "+e+" ")},attr:function(e,t){return"string"==typeof e&&p.isUndefined(t)?this.ele.getAttribute(e):("string"==typeof e&&(t=String(t),this.ele.setAttribute(e,t)),this)},offset:function(){var e=this.ele.getBoundingClientRect();if(e.width||e.height){var t=this.ele.ownerDocument.documentElement;return{top:e.top+window.pageYOffset-t.clientTop,left:e.left+window.pageXOffset-t.clientLeft}}return{top:0,left:0}},getSize:function(){if(!window.getComputedStyle)return{width:this.ele.offsetWidth,height:this.ele.offsetHeight};try{var e=this.ele.getBoundingClientRect();return{width:e.width,height:e.height}}catch(e){return{width:0,height:0}}},getStyle:function(e){return this.ele.currentStyle?this.ele.currentStyle[e]:this.ele.ownerDocument.defaultView.getComputedStyle(this.ele,null).getPropertyValue(e)},wrap:function(e){var t=document.createElement(e);return this.ele.parentNode.insertBefore(t,this.ele),t.appendChild(this.ele),p.ry(t)},getCssStyle:function(e){var t=this.ele.style.getPropertyValue(e);if(t)return t;var r=null;if("function"==typeof window.getMatchedCSSRules&&(r=getMatchedCSSRules(this.ele)),!r||!p.isArray(r))return null;for(var n=r.length-1;0<=n;n--){if(t=r[n].style.getPropertyValue(e))return t}},sibling:function(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e},next:function(){return this.sibling(this.ele,"nextSibling")},prev:function(e){return this.sibling(this.ele,"previousSibling")},siblings:function(e){return this.siblings((this.ele.parentNode||{}).firstChild,this.ele)},children:function(e){return this.siblings(this.ele.firstChild)},parent:function(){var e=this.ele.parentNode;return e=e&&11!==e.nodeType?e:null,p.ry(e)}},p.jssdkDebug=function(e,t){if(l.para.is_debug)if(p.isString(e))l.registerPage({_jssdk_debug_info:e});else{var r=D.getCookieName(),n=document.cookie.match(new RegExp(r+"[^;]+"));r=n&&n[0]?n[0]:"",e._jssdk_debug_info="("+r+")"+navigator.userAgent}},p.strToUnicode=function(e){if("string"!=typeof e)return k.info("转换unicode错误",e),e;for(var t="",r=0;r<e.length;r++)t+="\\"+e.charCodeAt(r).toString(16);return t},p.getReferrer=function(e){return"string"!=typeof(e=e||document.referrer)?"取值异常_referrer异常_"+String(e):(0===e.indexOf("https://www.baidu.com/")&&(e=e.split("?")[0]),"string"==typeof(e=e.slice(0,l.para.max_referrer_string_length))?e:"")},p.getKeywordFromReferrer=function(){var e=l.para.source_type.keyword;if(document&&"string"==typeof document.referrer){if(0!==document.referrer.indexOf("http"))return""===document.referrer?"未取到值_直接打开":"未取到值_非http的url";var t=p.url("domain",document.referrer),r=p.url("?",document.referrer),n=null;for(var i in e)if(0===t.indexOf(i)&&"object"==typeof r)if(n=e[i],p.isArray(n)){for(i=0;i<n.length;i++)if(r[n[i]])return r[n[i]]}else if(r[n])return r[n];return"未取到值"}return"取值异常_referrer异常_"+String(document.referrer)},p.getSourceFromReferrer=function(){function e(e,t){for(var r=0;r<e.length;r++)if(-1!==t.split("?")[0].indexOf(e[r]))return!0}var t=l.para.source_type.search,r=l.para.source_type.social,n=document.referrer||"",i=p.info.pageProp.url;if(i){var o=i.match(/(utm_source|utm_medium|utm_campaign|utm_content|utm_term)\=[^&]+/);return o&&o[0]?"付费广告流量":e(t,n)?"自然搜索流量":e(r,n)?"社交网站流量":""===n?"直接流量":"引荐流量"}return"获取url异常"},p.info={initPage:function(){var e=p.getReferrer(),t=e?p.url("hostname",e):e,r=e?p.url("domain",e):e,n=location.href,i=n?p.url("hostname",n):n,o=n?p.url("domain",n):n;e&&!r&&p.jssdkDebug("referrer_domain异常_"+e+"_"+r),o||p.jssdkDebug("url_domain异常_"+n+"_"+o),this.pageProp={referrer:e,referrer_host:t,referrer_domain:r,url:n,url_host:i,url_domain:o}},pageProp:{},campaignParams:function(){var e=S.split(" "),t="",r={};return p.isArray(l.para.source_channel)&&0<l.para.source_channel.length&&(e=e.concat(l.para.source_channel),e=p.unique(e)),p.each(e,function(e){(t=p.getQueryParam(location.href,e)).length&&(r[e]=t)}),r},campaignParamsStandard:function(e,t){e=e||"",t=t||"";var r=p.info.campaignParams(),n={},i={};for(var o in r)-1!==(" "+S+" ").indexOf(" "+o+" ")?n[e+o]=r[o]:i[t+o]=r[o];return{$utms:n,otherUtms:i}},properties:function(){return{$screen_height:Number(screen.height)||0,$screen_width:Number(screen.width)||0,$lib:"js",$lib_version:String(s)}},currentProps:{},register:function(e){p.extend(p.info.currentProps,e)}},p.autoExeQueue=function(){return{items:[],enqueue:function(e){this.items.push(e),this.start()},dequeue:function(){return this.items.shift()},getCurrentItem:function(){return this.items[0]},isRun:!1,start:function(){0<this.items.length&&!this.isRun&&(this.isRun=!0,this.getCurrentItem().start())},close:function(){this.dequeue(),this.isRun=!1,this.start()}}};var N={getSendUrl:function(e,t){var r=p.base64Encode(t),n="crc="+p.hashCode(r);return-1!==e.indexOf("?")?e+"&data="+encodeURIComponent(r)+"&ext="+encodeURIComponent(n):e+"?data="+encodeURIComponent(r)+"&ext="+encodeURIComponent(n)},getSendData:function(e){var t=p.base64Encode(e),r="crc="+p.hashCode(t);return"data="+encodeURIComponent(t)+"&ext="+encodeURIComponent(r)},getInstance:function(e){var t={},r=(t=!e.config||"image"!==e.config.send_type&&"ajax"!==e.config.send_type&&"beacon"!==e.config.send_type?new this[l.para.send_type](e):new this[e.config.send_type](e)).start;return t.start=function(){var e=this;r.apply(this,arguments),setTimeout(function(){e.isEnd()},l.para.callback_timeout)},t.end=function(){this.callback&&this.callback()},t.isEnd=function(){this.received||(this.received=!0,this.end(),this.close())},t},image:function(e){this.callback=e.callback,this.img=document.createElement("img"),this.img.width=1,this.img.height=1,this.data=e.data,this.server_url=N.getSendUrl(e.server_url,e.data)}};N.image.prototype.start=function(){var t=this;new Date;this.img.onload=function(e){this.onload=null,t.isEnd()},this.img.onerror=function(e){this.onerror=null,t.isEnd()},this.img.onabort=function(e){this.onabort=null,t.isEnd()},this.img.src=this.server_url},N.ajax=function(e){this.callback=e.callback,this.server_url=e.server_url,this.data=N.getSendData(e.data)},N.ajax.prototype.start=function(){var e=this;new Date;p.ajax({url:this.server_url,type:"POST",data:this.data,credentials:!1,cors:!0,success:function(){e.isEnd()},error:function(){e.isEnd()}})},N.beacon=function(e){this.callback=e.callback,this.server_url=e.server_url,this.data=N.getSendData(e.data)},N.beacon.prototype.start=function(){var e=this;"object"==typeof navigator&&"function"==typeof navigator.sendBeacon&&navigator.sendBeacon(this.server_url,this.data),setTimeout(function(){e.isEnd()},40)};var x={};(l.sendState=x).queue=p.autoExeQueue(),x.requestData=null,x.getSendCall=function(e,t,r){if(l.is_heatmap_render_mode)return!1;var n=e;if(e=JSON.stringify(e),k.info(n),this.requestData={data:e,config:t,callback:r},!0===l.para.use_app_track||"only"===l.para.use_app_track)if("object"==typeof SensorsData_APP_JS_Bridge&&(SensorsData_APP_JS_Bridge.sensorsdata_verify||SensorsData_APP_JS_Bridge.sensorsdata_track))SensorsData_APP_JS_Bridge.sensorsdata_verify?SensorsData_APP_JS_Bridge.sensorsdata_verify(JSON.stringify(p.extend({server_url:l.para.server_url},n)))?"function"==typeof r&&r():this.prepareServerUrl():(SensorsData_APP_JS_Bridge.sensorsdata_track(JSON.stringify(p.extend({server_url:l.para.server_url},n))),"function"==typeof r&&r());else if(!/sensors-verify/.test(navigator.userAgent)&&!/sa-sdk-ios/.test(navigator.userAgent)||window.MSStream)!0===l.para.use_app_track&&this.prepareServerUrl();else{var i=null;if(/sensors-verify/.test(navigator.userAgent)){var o=navigator.userAgent.match(/sensors-verify\/([^\s]+)/);if(o&&o[0]&&"string"==typeof o[1]&&2===o[1].split("?").length){o=o[1].split("?");var a=null,s=null;try{a=p.url("hostname",l.para.server_url),s=p.url("?project",l.para.server_url)||"default"}catch(e){}a&&a===o[0]&&s&&s===o[1]?((i=document.createElement("iframe")).setAttribute("src","sensorsanalytics://trackEvent?event="+encodeURIComponent(JSON.stringify(p.extend({server_url:l.para.server_url},n)))),document.documentElement.appendChild(i),i.parentNode.removeChild(i),i=null,"function"==typeof r&&r()):this.prepareServerUrl()}}else(i=document.createElement("iframe")).setAttribute("src","sensorsanalytics://trackEvent?event="+encodeURIComponent(JSON.stringify(p.extend({server_url:l.para.server_url},n)))),document.documentElement.appendChild(i),i.parentNode.removeChild(i),i=null,"function"==typeof r&&r()}else"mui"===l.para.use_app_track?p.isObject(window.plus)&&window.plus.SDAnalytics&&window.plus.SDAnalytics.trackH5Event&&window.plus.SDAnalytics.trackH5Event(e):this.prepareServerUrl()},x.prepareServerUrl=function(){if("object"==typeof this.requestData.config&&this.requestData.config.server_url)this.sendCall(this.requestData.config.server_url,this.requestData.callback);else if(p.isArray(l.para.server_url))for(var e=0;e<l.para.server_url.length;e++)this.sendCall(l.para.server_url[e]);else this.sendCall(l.para.server_url,this.requestData.callback)};var C={checkIsAddSign:function(e){"track"===e.type&&(p.cookie.getNewUser()?e.properties.$is_first_day=!0:e.properties.$is_first_day=!1)},is_first_visit_time:!(x.sendCall=function(e,t){var r=N.getInstance({server_url:e,data:this.requestData.data,callback:t,config:this.requestData.config}),n=this;r.close=function(){n.queue.close()},this.queue.enqueue(r)}),checkIsFirstTime:function(e){"track"===e.type&&"$pageview"===e.event&&(this.is_first_visit_time?(e.properties.$is_first_time=!0,this.is_first_visit_time=!1):e.properties.$is_first_time=!1)},setDeviceId:function(e){var t=null,r=p.cookie.get("sensorsdata2015jssdkcross"),n={};null!=r&&p.isJSONString(r)&&(n=JSON.parse(r)).$device_id&&(t=n.$device_id),t=t||e,!0===l.para.cross_subdomain?D.set("$device_id",t):(n.$device_id=t,p.cookie.set("sensorsdata2015jssdkcross",JSON.stringify(n),null,!0)),l.para.is_track_device_id&&(p.info.currentProps.$device_id=t)},storeInitCheck:function(){if(_){var e=new Date,t=23-e.getHours(),r=59-e.getMinutes(),n=59-e.getSeconds();p.cookie.set(p.cookie.getCookieName("new_user"),"1",3600*t+60*r+n+"s"),this.is_first_visit_time=!0}else p.cookie.getNewUser()||(this.checkIsAddSign=function(e){"track"===e.type&&(e.properties.$is_first_day=!1)}),this.checkIsFirstTime=function(e){"track"===e.type&&"$pageview"===e.event&&(e.properties.$is_first_time=!1)}},checkIsFirstLatest:function(){for(var e=p.info.pageProp.url_domain,t=p.info.pageProp.referrer_domain,r=["$utm_source","$utm_medium","$utm_campaign","$utm_content","$utm_term"],n=D.getProps(),i=0;i<r.length;i++)r[i]in n&&delete n[r[i]];D.setProps(n,!0),e!==t&&l.register({$latest_traffic_source_type:p.getSourceFromReferrer(),$latest_referrer:p.info.pageProp.referrer,$latest_referrer_host:p.info.pageProp.referrer_host,$latest_search_keyword:p.getKeywordFromReferrer()});var o=p.info.campaignParamsStandard("$latest_","_latest_"),a=o.$utms,s=o.otherUtms;p.isEmptyObject(a)||l.register(a),p.isEmptyObject(s)||l.register(s)}},E={};E.checkOption={regChecks:{regName:/^((?!^distinct_id$|^original_id$|^time$|^properties$|^id$|^first_id$|^second_id$|^users$|^events$|^event$|^user_id$|^date$|^datetime$)[a-zA-Z_$][a-zA-Z\d_$]{0,99})$/i},checkPropertiesKey:function(e){var r=this,n=!0;return p.each(e,function(e,t){r.regChecks.regName.test(t)||(n=!1)}),n},check:function(e,t){return"string"==typeof this[e]?this[this[e]](t):this[e](t)},str:function(e){return p.isString(e)||k.info("请检查参数格式,必须是字符串"),!0},properties:function(e){return p.strip_sa_properties(e),e&&(p.isObject(e)?this.checkPropertiesKey(e)||k.info("properties里的key必须是由字符串数字_组成，且不能是系统保留字"):k.info("properties可以没有，但有的话必须是对象")),!0},propertiesMust:function(e){return p.strip_sa_properties(e),void 0===e||!p.isObject(e)||p.isEmptyObject(e)?k.info("properties必须是对象且有值"):this.checkPropertiesKey(e)||k.info("properties里的key必须是由字符串数字_组成，且不能是系统保留字"),!0},event:function(e){return p.isString(e)&&this.regChecks.regName.test(e)||k.info("请检查参数格式,必须是字符串,且eventName必须是字符串_开头,且不能是系统保留字"),!0},test_id:"str",group_id:"str",distinct_id:function(e){return!(!p.isString(e)||!/^.{1,255}$/.test(e))||(k.info("distinct_id必须是不能为空，且小于255位的字符串"),!1)}},E.check=function(e){for(var t in e)if(!this.checkOption.check(t,e[t]))return!1;return!0},E.send=function(e,t){var r={distinct_id:D.getDistinctId(),lib:{$lib:"js",$lib_method:"code",$lib_version:String(s)},properties:{}};if(p.isObject(e)&&p.isObject(e.properties)&&!p.isEmptyObject(e.properties)&&e.properties.$lib_detail&&(r.lib.$lib_detail=e.properties.$lib_detail,delete e.properties.$lib_detail),"string"!=typeof D.getDistinctId()||!typeof D.getDistinctId()){var n="";switch(D.getDistinctId()){case null:n="null";break;case void 0:n="undefined";break;case"":n="空";break;default:n=String(D.getDistinctId())}g.push("distinct_id-"+v+"-"+y+"-"+n+"-"+b+"-"+w)}p.extend(r,e),0<g.length&&(r.jssdk_error=g.join("--")),p.isObject(e.properties)&&!p.isEmptyObject(e.properties)&&p.extend(r.properties,e.properties),p.isObject(t)&&p.extend(r.lib,t),e.type&&"profile"===e.type.slice(0,7)||(r.properties=p.extend({},p.info.properties(),D.getProps(),D.getSessionProps(),p.info.currentProps,r.properties),p.isString(r.properties.$latest_referrer)||(r.properties.$latest_referrer="取值异常",p.jssdkDebug(r.properties,D.getProps())),p.isString(r.properties.$latest_referrer_host)||(r.properties.$latest_referrer_host="取值异常"),p.isString(r.properties.$latest_search_keyword)||(r.properties.$latest_search_keyword="取值异常"),p.isString(r.properties.$latest_traffic_source_type)||(r.properties.$latest_traffic_source_type="取值异常")),r.properties.$time&&p.isDate(r.properties.$time)?(r.time=1*r.properties.$time,delete r.properties.$time):l.para.use_client_time&&(r.time=1*new Date),p.searchObjDate(r),p.searchObjString(r),p.searchZZAppStyle(r);var i=p.searchConfigData(r.properties);C.checkIsAddSign(r),C.checkIsFirstTime(r),!0===l.para.debug_mode?(k.info(r),this.debugPath(JSON.stringify(r),t)):l.sendState.getSendCall(r,i,t)},E.debugPath=function(e,t){var r=e,n="";n=-1!==l.para.debug_mode_url.indexOf("?")?l.para.debug_mode_url+"&data="+encodeURIComponent(p.base64Encode(e)):l.para.debug_mode_url+"?data="+encodeURIComponent(p.base64Encode(e)),p.ajax({url:n,type:"GET",cors:!0,header:{"Dry-Run":String(l.para.debug_mode_upload)},success:function(e){!0===p.isEmptyObject(e)?alert("debug数据发送成功"+r):alert("debug失败 错误原因"+JSON.stringify(e))}})};var D=l.store={_sessionState:{},_state:{},getProps:function(){return this._state.props||{}},getSessionProps:function(){return this._sessionState},getDistinctId:function(){return this._state.distinct_id},getFirstId:function(){return this._state.first_id},toState:function(e){var t=null;if(null!=e&&p.isJSONString(e))if(t=JSON.parse(e),this._state=p.extend(t),t.distinct_id){if("object"==typeof t.props){for(var r in t.props)"string"==typeof t.props[r]&&(t.props[r]=t.props[r].slice(0,l.para.max_referrer_string_length));this.save()}}else this.set("distinct_id",p.UUID()),g.push("toStateParseDistinctError");else this.set("distinct_id",p.UUID()),g.push("toStateParseError")},initSessionState:function(){var e=p.cookie.get("sensorsdata2015session"),t=null;null!==e&&"object"==typeof(t=JSON.parse(e))&&(this._sessionState=t||{})},setOnce:function(e,t){e in this._state||this.set(e,t)},set:function(e,t){this._state=this._state||{},this._state[e]=t,this.save()},change:function(e,t){this._state[e]=t},setSessionProps:function(e){var t=this._sessionState;p.extend(t,e),this.sessionSave(t)},setSessionPropsOnce:function(e){var t=this._sessionState;p.coverExtend(t,e),this.sessionSave(t)},setProps:function(e,t){var r=this._state.props||{};t?this.set("props",e):(p.extend(r,e),this.set("props",r))},removeProps:function(e){if(!p.isArray(e))return!1;for(var t=this._state.props||{},r=0;r<e.length;r++)e[r]in t&&delete t[r];this.set("props",t)},setPropsOnce:function(e){var t=this._state.props||{};p.coverExtend(t,e),this.set("props",t)},clearAllProps:function(){for(var e in this._sessionState={},this._state.props)1!==e.indexOf("latest_")&&delete this._state.props[e];this.sessionSave({}),this.save()},sessionSave:function(e){this._sessionState=e,p.cookie.set("sensorsdata2015session",JSON.stringify(this._sessionState),0)},save:function(){p.cookie.set(this.getCookieName(),JSON.stringify(this._state),73e3,l.para.cross_subdomain)},getCookieName:function(){var e="";return e=!1===l.para.cross_subdomain?"string"==typeof(e=p.url("sub",location.href))&&""!==e?"sa_jssdk_2015_"+e:"sa_jssdk_2015_root":"sensorsdata2015jssdkcross"},init:function(){navigator.cookieEnabled||(g.push("cookieNotEnable"),p.localStorage.isSupport||g.push("localStorageNotEnable")),this.initSessionState();var e=p.UUID(),t=p.cookie.get(this.getCookieName());null===t?(_=!0,v=1,this.set("distinct_id",e)):(v=2,b=JSON.stringify(t),w=JSON.stringify(document.cookie.match(/2015[^;]+/g)),p.isJSONString(t)&&JSON.parse(t).distinct_id||(_=!0),this.toState(t)),C.setDeviceId(e),C.storeInitCheck(),C.checkIsFirstLatest()}},I={isReady:function(e){e()},getUtm:function(){return p.info.campaignParams()},getStayTime:function(){return(new Date-l._t)/1e3},setProfileLocal:function(e){if(!p.localStorage.isSupport())return l.setProfile(e),!1;if(!p.isObject(e)||p.isEmptyObject(e))return!1;var t=p.localStorage.parse("sensorsdata_2015_jssdk_profile"),r=!1;if(p.isObject(t)&&!p.isEmptyObject(t)){for(var n in e)!(n in t&&t[n]!==e[n])&&n in t||(t[n]=e[n],r=!0);r&&(p.localStorage.set("sensorsdata_2015_jssdk_profile",JSON.stringify(t)),l.setProfile(e))}else p.localStorage.set("sensorsdata_2015_jssdk_profile",JSON.stringify(e)),l.setProfile(e)},setInitReferrer:function(){var e=p.getReferrer();l.setOnceProfile({_init_referrer:e,_init_referrer_host:p.info.pageProp.referrer_host})},setSessionReferrer:function(){var e=p.getReferrer();D.setSessionPropsOnce({_session_referrer:e,_session_referrer_host:p.info.pageProp.referrer_host})},setDefaultAttr:function(){p.info.register({_current_url:location.href,_referrer:p.getReferrer(),_referring_host:p.info.pageProp.referrer_host})},trackHeatmap:function(){this.trackHeatMap.apply(arguments)},trackHeatMap:function(e){if("object"==typeof e&&e.tagName){var t=e.tagName.toLowerCase(),r=e.parentNode.tagName.toLowerCase();"button"!==t&&"a"!==t&&"a"!==r&&"button"!==r&&"input"!==t&&"textarea"!==t&&T.start(null,e,t)}},autoTrackSinglePage:function(e,t){var r=p.info.pageProp.url;function n(e,t){l.track("$pageview",p.extend({$referrer:r,$referrer_host:p.url("hostname",r)||"",$url:location.href,$url_path:location.pathname,$title:document.title},e,function(){var e=p.info.campaignParams(),t={};for(var r in e)-1!==(" "+S+" ").indexOf(" "+r+" ")?t["$"+r]=e[r]:t[r]=e[r];return t}()),t),r=location.href}n(e,t),this.autoTrackSinglePage=n},autoTrackWithoutProfile:function(e,t){e=p.isObject(e)?e:{},this.autoTrack(p.extend(e,{not_set_profile:!0}),t)},autoTrack:function(t,r){t=p.isObject(t)?t:{};var e=p.info.campaignParams(),n={};for(var i in e)-1!==(" "+S+" ").indexOf(" "+i+" ")?n["$"+i]=e[i]:n[i]=e[i];_&&!t.not_set_profile&&l.setOnceProfile(p.extend({$first_visit_time:new Date,$first_referrer:p.getReferrer(),$first_browser_language:navigator.language||"取值异常",$first_browser_charset:"string"==typeof document.charset?document.charset.toUpperCase():"取值异常",$first_referrer_host:p.info.pageProp.referrer_host,$first_traffic_source_type:p.getSourceFromReferrer(),$first_search_keyword:p.getKeywordFromReferrer()},n)),t.not_set_profile&&delete t.not_set_profile;var o=location.href;l.para.is_single_page&&p.addHashEvent(function(){var e=p.getReferrer(o);l.track("$pageview",p.extend({$referrer:e,$referrer_host:p.url("hostname",e)||"",$url:location.href,$url_path:location.pathname,$title:document.title},n,t),r),o=location.href}),l.track("$pageview",p.extend({$referrer:p.getReferrer(),$referrer_host:p.info.pageProp.referrer_host,$url:location.href,$url_path:location.pathname,$title:document.title},n,t),r)}};function A(){var t=null,r=null;window.sensorsdata_app_js_bridge_call_js=function(e){!function(e){t=e,p.isJSONString(t)&&(t=JSON.parse(t)),r&&(r(t),t=r=null)}(e)},l.getAppStatus=function(e){if(!function(){if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){var e=document.createElement("iframe");e.setAttribute("src","sensorsanalytics://getAppInfo"),document.documentElement.appendChild(e),e.parentNode.removeChild(e),e=null}}(),"object"==typeof window.SensorsData_APP_JS_Bridge&&window.SensorsData_APP_JS_Bridge.sensorsdata_call_app&&(t=SensorsData_APP_JS_Bridge.sensorsdata_call_app(),p.isJSONString(t)&&(t=JSON.parse(t))),!e)return t;null===t?r=e:(e(t),t=null)}}l.quick=function(){var e=f.call(arguments),t=e[0],r=e.slice(1);if("string"==typeof t&&I[t])return I[t].apply(I,r);"function"==typeof t?t.apply(l,r):k.info("quick方法中没有这个功能"+e[0])},l.track=function(e,t,r){E.check({event:e,properties:t})&&E.send({type:"track",event:e,properties:t},r)},p.trackLink=function(e,n,i){var o=null;if((e=e||{}).ele&&(o=e.ele),e.event&&(o=e.target?e.target:e.event.target),i=i||{},!o||"object"!=typeof o)return!1;if(!o.href||/^javascript/.test(o.href)||o.target||o.download||o.onclick)return l.track(n,i),!1;function t(e){e.stopPropagation(),e.preventDefault();var t=!1;function r(){t||(t=!0,location.href=o.href)}setTimeout(r,1e3),l.track(n,i,r)}e.event&&t(e.event),e.ele&&p.addEvent(e.ele,"click",function(e){t(e)})},l.trackLink=function(e,t,r){"object"==typeof e&&e.tagName?p.trackLink({ele:e},t,r):"object"==typeof e&&e.target&&e.event&&p.trackLink(e,t,r)},l.trackLinks=function(n,i,o){return o=o||{},!(!n||"object"!=typeof n)&&(!(!n.href||/^javascript/.test(n.href)||n.target)&&void p.addEvent(n,"click",function(e){e.preventDefault();var t=!1;function r(){t||(t=!0,location.href=n.href)}setTimeout(r,1e3),l.track(i,o,r)}))},l.setProfile=function(e,t){E.check({propertiesMust:e})&&E.send({type:"profile_set",properties:e},t)},l.setOnceProfile=function(e,t){E.check({propertiesMust:e})&&E.send({type:"profile_set_once",properties:e},t)},l.appendProfile=function(r,e){E.check({propertiesMust:r})&&(p.each(r,function(e,t){p.isString(e)?r[t]=[e]:p.isArray(e)||(delete r[t],k.info("appendProfile属性的值必须是字符串或者数组"))}),p.isEmptyObject(r)||E.send({type:"profile_append",properties:r},e))},l.incrementProfile=function(e,t){var r=e;p.isString(e)&&((e={})[r]=1),E.check({propertiesMust:e})&&(!function(e){for(var t in e)if(!/-*\d+/.test(String(e[t])))return!1;return!0}(e)?k.info("profile_increment的值只能是数字"):E.send({type:"profile_increment",properties:e},t))},l.deleteProfile=function(e){E.send({type:"profile_delete"},e),D.set("distinct_id",p.UUID())},l.unsetProfile=function(e,t){var r=e,n={};p.isString(e)&&(e=[]).push(r),p.isArray(e)?(p.each(e,function(e){p.isString(e)?n[e]=!0:k.info("profile_unset给的数组里面的值必须时string,已经过滤掉",e)}),E.send({type:"profile_unset",properties:n},t)):k.info("profile_unset的参数是数组")},l.identify=function(e,t){"number"==typeof e&&(e=String(e));var r=D.getFirstId();void 0===e?r?D.set("first_id",p.UUID()):D.set("distinct_id",p.UUID()):E.check({distinct_id:e})?!0===t?r?D.set("first_id",e):D.set("distinct_id",e):r?D.change("first_id",e):D.change("distinct_id",e):k.info("identify的参数必须是字符串")},l.trackSignup=function(e,t,r,n){E.check({distinct_id:e,event:t,properties:r})&&(E.send({original_id:D.getFirstId()||D.getDistinctId(),distinct_id:e,type:"track_signup",event:t,properties:r},n),D.set("distinct_id",e))},l.trackAbtest=function(e,t){},l.registerPage=function(e){E.check({properties:e})?p.extend(p.info.currentProps,e):k.info("register输入的参数有误")},l.clearAllRegister=function(){D.clearAllProps()},l.register=function(e){E.check({properties:e})?D.setProps(e):k.info("register输入的参数有误")},l.registerOnce=function(e){E.check({properties:e})?D.setPropsOnce(e):k.info("registerOnce输入的参数有误")},l.registerSession=function(e){E.check({properties:e})?D.setSessionProps(e):k.info("registerSession输入的参数有误")},l.registerSessionOnce=function(e){E.check({properties:e})?D.setSessionPropsOnce(e):k.info("registerSessionOnce输入的参数有误")},l.login=function(e){if("number"==typeof e&&(e=String(e)),E.check({distinct_id:e})){var t=D.getFirstId(),r=D.getDistinctId();e!==r&&(t||D.set("first_id",r),l.trackSignup(e,"$SignUp"))}else k.info("login的参数必须是字符串")},l.logout=function(e){var t=D.getFirstId();t?(D.set("first_id",""),!0===e?D.set("distinct_id",p.UUID()):D.set("distinct_id",t)):k.info("没有first_id，logout失败")},l.getPresetProperties=function(){var e={$referrer:"string"==typeof document.referrer?document.referrer.slice(0,100):"",$referrer_host:p.url("hostname",document.referrer)||"",$url:location.href,$url_path:location.pathname,$title:document.title||"",_distinct_id:D.getDistinctId()};return p.extend({},p.info.properties(),l.store.getProps(),function(){var e=p.info.campaignParams(),t={};for(var r in e)-1!==(" "+S+" ").indexOf(" "+r+" ")?t["$"+r]=e[r]:t[r]=e[r];return t}(),e)};var T={getDomIndex:function(e){var t=[].indexOf;if(!e.parentNode)return-1;var r=e.parentNode.children;if(!r)return-1;var n=r.length;if(t)return t.call(r,e);for(var i=0;i<n;++i)if(e==r[i])return i;return-1},selector:function(e){var t=e.parentNode&&9==e.parentNode.nodeType?-1:this.getDomIndex(e);return e.id?"#"+e.id:e.tagName.toLowerCase()+(~t?":nth-child("+(t+1)+")":"")},getDomSelector:function(e,t){if(!e||!e.parentNode||!e.parentNode.children)return!1;t=t&&t.join?t:[];var r=e.nodeName.toLowerCase();return e&&"body"!==r&&1==e.nodeType?(t.unshift(this.selector(e)),e.id?t.join(" > "):this.getDomSelector(e.parentNode,t)):(t.unshift("body"),t.join(" > "))},na:function(){var e=document.documentElement.scrollLeft||window.pageXOffset;return parseInt(isNaN(e)?0:e,10)},i:function(){var t=0;try{t=o.documentElement.scrollTop||m.pageYOffset,t=isNaN(t)?0:t}catch(e){t=0}return parseInt(t,10)},getBrowserWidth:function(){var e=window.innerWidth||document.body.clientWidth;return isNaN(e)?0:parseInt(e,10)},getBrowserHeight:function(){var e=window.innerHeight||document.body.clientHeight;return isNaN(e)?0:parseInt(e,10)},getScrollWidth:function(){var e=parseInt(document.body.scrollWidth,10);return isNaN(e)?0:e},W:function(e){var t=parseInt(+e.clientX+ +this.na(),10);e=parseInt(+e.clientY+ +this.i(),10);return{x:isNaN(t)?0:t,y:isNaN(e)?0:e}},start:function(e,t,r){if(l.para.heatmap&&l.para.heatmap.collect_element&&!l.para.heatmap.collect_element(t))return!1;var n=this.getDomSelector(t),i=p.getEleInfo({target:t});if(i.$element_selector=n||"",l.para.heatmap&&l.para.heatmap.custom_property){var o=l.para.heatmap.custom_property(t);p.isObject(o)&&(i=p.extend(i,o))}"a"===r&&l.para.heatmap&&!0===l.para.heatmap.isTrackLink?p.trackLink({event:e,target:t},"$WebClick",i):l.track("$WebClick",i)},hasElement:function(e){var t=e._getPath();if(p.isArray(t)&&0<t.length)for(var r=0;r<t.length;r++)if(t[r]&&t[r].tagName&&"a"===t[r].tagName.toLowerCase())return t[r];return!1},initScrollmap:function(){if(!p.isObject(l.para.heatmap)||"default"!==l.para.heatmap.scroll_notice_map)return!1;var e,r,t=((r={}).timeout=(e={timeout:1e3,func:function(e){var t=new Date,r=t-this.current_time;r>l.para.heatmap.scroll_delay_time&&(e.$url=location.href,e.$title=document.title,e.$url_path=location.pathname,e.event_duration=parseInt(r)/1e3,l.track("$WebStay",e)),this.current_time=t}}).timeout||1e3,r.func=e.func,r.hasInit=!1,r.inter=null,r.main=function(e){this.func(e),this.inter=null},r.go=function(e){var t={};this.inter||(t.$viewport_position=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop||0,t.$viewport_position=Math.round(t.$viewport_position)||0,t.$viewport_height=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0,t.$viewport_width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0,e?r.main(t):this.inter=setTimeout(function(){r.main(t)},this.timeout))},r);t.current_time=new Date,p.addEvent(window,"scroll",function(){t.go()}),p.addEvent(window,"unload",function(){t.go("notime")})},initHeatmap:function(){var a=this;return!(!p.isObject(l.para.heatmap)||"default"!==l.para.heatmap.clickmap)&&(!(p.isFunction(l.para.heatmap.collect_url)&&!l.para.heatmap.collect_url())&&("all"===l.para.heatmap.collect_elements?l.para.heatmap.collect_elements="all":l.para.heatmap.collect_elements="interact",void("all"===l.para.heatmap.collect_elements?p.addEvent(document,"click",function(e){var t=e||window.event;if(!t)return!1;var r=t.target||t.srcElement;if("object"!=typeof r)return!1;if("string"!=typeof r.tagName)return!1;var n=r.tagName.toLowerCase();if("body"===n.toLowerCase()||"html"===n.toLowerCase())return!1;if(!r||!r.parentNode||!r.parentNode.children)return!1;var i=r.parentNode.tagName.toLowerCase();"a"===i||"button"===i?a.start(t,r.parentNode,r.parentNode.tagName.toLowerCase()):a.start(t,r,n)}):p.addEvent(document,"click",function(e){var t=e||window.event;if(!t)return!1;var r=t.target||t.srcElement;if("object"!=typeof r)return!1;if("string"!=typeof r.tagName)return!1;var n=r.tagName.toLowerCase();if("body"===n.toLowerCase()||"html"===n.toLowerCase())return!1;if(!r||!r.parentNode||!r.parentNode.children)return!1;var i=r.parentNode;if("a"===n||"button"===n||"input"===n||"textarea"===n)a.start(t,r,n);else if("button"===i.tagName.toLowerCase()||"a"===i.tagName.toLowerCase())a.start(t,i,r.parentNode.tagName.toLowerCase());else if("area"===n&&"map"===i.tagName.toLowerCase()&&p.ry(i).prev().tagName&&"img"===p.ry(i).prev().tagName.toLowerCase())a.start(t,p.ry(i).prev(),p.ry(i).prev().tagName.toLowerCase());else{var o=a.hasElement(e);o&&a.start(t,o,o.tagName.toLowerCase())}}))))},prepare:function(e){var t=location.search.match(/sa-request-id=([^&#]+)/),r=location.search.match(/sa-request-type=([^&#]+)/),n=location.search.match(/sa-request-url=([^&#]+)/);function i(e,t,r){l.para.heatmap_url?p.loadScript({success:function(){setTimeout(function(){"undefined"!=typeof sa_jssdk_heatmap_render&&sa_jssdk_heatmap_render(l,e,t,r)},0)},error:function(){},type:"js",url:l.para.heatmap_url}):k.info("没有指定heatmap_url的路径")}t&&t[0]&&t[1]?(l.is_heatmap_render_mode=!0,p.sessionStorage.isSupport()&&(n&&n[0]&&n[1]&&sessionStorage.setItem("sensors_heatmap_url",decodeURIComponent(n[1])),sessionStorage.setItem("sensors_heatmap_id",t[1]),r&&r[0]&&r[1]?"1"===r[1]||"2"===r[1]||"3"===r[1]?(r=r[1],sessionStorage.setItem("sensors_heatmap_type",r)):r=null:r=null!==sessionStorage.getItem("sensors_heatmap_type")?sessionStorage.getItem("sensors_heatmap_type"):null),i(t[1],r)):p.sessionStorage.isSupport()&&"string"==typeof sessionStorage.getItem("sensors_heatmap_id")?(l.is_heatmap_render_mode=!0,i(sessionStorage.getItem("sensors_heatmap_id"),sessionStorage.getItem("sensors_heatmap_type"),location.href)):(e(),p.isObject(l.para.heatmap)&&(this.initHeatmap(),this.initScrollmap()))}};l.init=function(e){(!e&&n||e&&!n)&&(l.initPara(e),l._init(),l.readyState=2)},l._init=function(){T.prepare(function(){A(),p.info.initPage(),D.init(),l._q&&p.isArray(l._q)&&0<l._q.length&&p.each(l._q,function(e){l[e[0]].apply(l,f.call(e[1]))})})},l.init(),e.exports=l},186:function(e){e.exports=JSON.parse('{"name":"@shimo/sensors","version":"3.0.5","description":"shimo sensor","license":"MIT","repository":"","author":{"name":"xuhaihao, Tom"},"keywords":["埋点"],"files":["lib"],"main":"lib/index.js","typings":"lib/index.d.ts","scripts":{"clean":"rimraf lib && rimraf coverage","format":"prettier --write \\"{src,__tests__}/**/*.ts\\" --single-quote --trailing-comma es5","lint":"tslint --force --format verbose \\"src/**/*.ts\\"","prepublishOnly":"npm run build","prebuild":"npm run clean && npm run format && npm run lint && echo Using TypeScript && tsc --version","build":"tsc --pretty && npm run build:doc","test":"jest","coverage":"jest --coverage","watch":"npm run build -- --watch","watch:test":"jest --watch","build:doc":"jsdoc2md --files \'src/**/*.ts\' --configure jsdoc2md.json --template README.hbs > README.md && doctoc README.md","server":"node example/server.js","build:example":"webpack --config example/webpack.config.js --context example"},"dependencies":{"@shimo/runtime-env":"1.1.1","js-cookie":"2.2.0","lodash.assign":"4.2.0","lodash.get":"4.4.2"},"devDependencies":{"@babel/cli":"^7.1.0","@babel/core":"^7.1.0","@babel/plugin-proposal-class-properties":"^7.1.0","@babel/plugin-proposal-object-rest-spread":"^7.0.0","@babel/preset-env":"^7.1.0","@babel/preset-typescript":"^7.1.0","@types/jest":"^22.0.1","@types/node":"^8.0.0","coveralls":"^2.0.0","doctoc":"1.3.1","jest":"^22.0.4","jsdoc-babel":"^0.5.0","jsdoc-to-markdown":"^4.0.1","koa":"2.5.3","koa-bodyparser":"4.2.1","koa-router":"7.4.0","koa-static":"5.0.0","prettier":"^1.5.2","rimraf":"^2.0.0","ts-jest":"^22.0.1","ts-node":"^3.2.0","tslint":"^5.0.0","tslint-config-prettier":"^1.1.0","typescript":"^3.1.0","webpack":"4.20.2","webpack-cli":"3.1.2"},"engines":{"node":">=6.0.0"},"jest":{"transform":{".(ts)":"<rootDir>/node_modules/ts-jest/preprocessor.js"},"testRegex":"(/__tests__/.*|\\\\.(test|spec))\\\\.(ts|js)$","moduleFileExtensions":["ts","js"],"testEnvironment":"node"},"_resolved":"http://registry.npm.shimo.run/@shimo/sensors/download/@shimo/sensors-3.0.5.tgz","_integrity":"sha1-atO/VZ8ii0HWXg9VfEpTrttcbdA=","_from":"@shimo/sensors@3.0.5"}')},187:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(177),i=window;i.shimoSensor||(i.shimoSensor=new n.ShimoSensor),e.exports=i.shimoSensor,e.exports.ShimoSensor=n.ShimoSensor}}]);
//# sourceMappingURL=sensors.775e663f.js.map